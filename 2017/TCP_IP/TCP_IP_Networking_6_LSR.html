<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <title>TCP_IP_Networking_6_LSR</title>
  <style type="text/css">
      code{white-space: pre-wrap;}
      span.smallcaps{font-variant: small-caps;}
      span.underline{text-decoration: underline;}
      div.column{display: inline-block; vertical-align: top; width: 50%;}
  </style>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-AMS_CHTML-full" type="text/javascript"></script>
  <!--[if lt IE 9]>
    <script src="//cdnjs.cloudflare.com/ajax/libs/html5shiv/3.7.3/html5shiv-printshiv.min.js"></script>
  <![endif]-->
  <style type="text/css">
  @font-face {
    font-family: octicons-link;
    src: url(data:font/woff;charset=utf-8;base64,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) format('woff');
  }
  
  body {
    -webkit-text-size-adjust: 100%;
    text-size-adjust: 100%;
    color: #333;
    font-family: "Helvetica Neue", Helvetica, "Segoe UI", Arial, freesans, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
    font-size: 16px;
    line-height: 1.6;
    word-wrap: break-word;
    width: 728px;
    max-width: 99%;
    box-sizing: border-box;
    padding: 30px 30px 8rem 30px;
    margin-left: auto;
    margin-right: auto;
  }
  
  body a {
    background-color: transparent;
  }
  
  body a:active,
  body a:hover {
    outline: 0;
  }
  
  body strong {
    font-weight: bold;
  }
  
  body h1 {
    font-size: 2em;
    margin: 0.67em 0;
  }
  
  body img {
    border: 0;
  }
  
  body hr {
    box-sizing: content-box;
    height: 0;
  }
  
  body pre {
    overflow: auto;
  }
  
  body code,
  body kbd,
  body pre {
    font-family: monospace, monospace;
    font-size: 1em;
  }
  
  body input {
    color: inherit;
    font: inherit;
    margin: 0;
  }
  
  body html input[disabled] {
    cursor: default;
  }
  
  body input {
    line-height: normal;
  }
  
  body input[type="checkbox"] {
    box-sizing: border-box;
    padding: 0;
  }
  
  body table {
    border-collapse: collapse;
    border-spacing: 0;
  }
  
  body td,
  body th {
    padding: 0;
  }
  
  body * {
    box-sizing: border-box;
  }
  
  body input {
    font: 13px / 1.4 Helvetica, arial, nimbussansl, liberationsans, freesans, clean, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol";
  }
  
  body a {
    color: #4078c0;
    text-decoration: none;
  }
  
  body a:hover,
  body a:active {
    text-decoration: underline;
  }
  
  body hr {
    height: 0;
    margin: 15px 0;
    overflow: hidden;
    background: transparent;
    border: 0;
    border-bottom: 1px solid #ddd;
  }
  
  body hr:before {
    display: table;
    content: "";
  }
  
  body hr:after {
    display: table;
    clear: both;
    content: "";
  }
  
  body h1,
  body h2,
  body h3,
  body h4,
  body h5,
  body h6 {
    margin-top: 15px;
    margin-bottom: 15px;
    line-height: 1.1;
  }
  
  body h1 {
    font-size: 30px;
  }
  
  body h2 {
    font-size: 21px;
  }
  
  body h3 {
    font-size: 16px;
  }
  
  body h4 {
    font-size: 14px;
  }
  
  body h5 {
    font-size: 12px;
  }
  
  body h6 {
    font-size: 11px;
  }
  
  body blockquote {
    margin: 0;
  }
  
  body ul,
  body ol {
    padding: 0;
    margin-top: 0;
    margin-bottom: 0;
  }
  
  body ol ol,
  body ul ol {
    list-style-type: lower-roman;
  }
  
  body ul ul ol,
  body ul ol ol,
  body ol ul ol,
  body ol ol ol {
    list-style-type: lower-alpha;
  }
  
  body dd {
    margin-left: 0;
  }
  
  body code {
    font-family: Consolas, "Liberation Mono", Menlo, Courier, monospace;
    font-size: 12px;
  }
  
  body pre {
    margin-top: 0;
    margin-bottom: 0;
    font: 12px Consolas, "Liberation Mono", Menlo, Courier, monospace;
  }
  
  body .select::-ms-expand {
    opacity: 0;
  }
  
  body .octicon {
    font: normal normal normal 16px/1 octicons-link;
    display: inline-block;
    text-decoration: none;
    text-rendering: auto;
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    -webkit-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
  }
  
  body .octicon-link:before {
    content: '\f05c';
  }
  
  body:before {
    display: table;
    content: "";
  }
  
  body:after {
    display: table;
    clear: both;
    content: "";
  }
  
  body>*:first-child {
    margin-top: 0 !important;
  }
  
  body>*:last-child {
    margin-bottom: 0 !important;
  }
  
  body a:not([href]) {
    color: inherit;
    text-decoration: none;
  }
  
  body .anchor {
    display: inline-block;
    padding-right: 2px;
    margin-left: -18px;
  }
  
  body .anchor:focus {
    outline: none;
  }
  
  body h1,
  body h2,
  body h3,
  body h4,
  body h5,
  body h6 {
    margin-top: 1em;
    margin-bottom: 16px;
    font-weight: bold;
    line-height: 1.4;
  }
  
  body h1 .octicon-link,
  body h2 .octicon-link,
  body h3 .octicon-link,
  body h4 .octicon-link,
  body h5 .octicon-link,
  body h6 .octicon-link {
    color: #000;
    vertical-align: middle;
    visibility: hidden;
  }
  
  body h1:hover .anchor,
  body h2:hover .anchor,
  body h3:hover .anchor,
  body h4:hover .anchor,
  body h5:hover .anchor,
  body h6:hover .anchor {
    text-decoration: none;
  }
  
  body h1:hover .anchor .octicon-link,
  body h2:hover .anchor .octicon-link,
  body h3:hover .anchor .octicon-link,
  body h4:hover .anchor .octicon-link,
  body h5:hover .anchor .octicon-link,
  body h6:hover .anchor .octicon-link {
    visibility: visible;
  }
  
  body h1 {
    padding-bottom: 0.3em;
    font-size: 1.75em;
    line-height: 1.2;
  }
  
  body h1 .anchor {
    line-height: 1;
  }
  
  body h2 {
    padding-bottom: 0.3em;
    font-size: 1.5em;
    line-height: 1.225;
  }
  
  body h2 .anchor {
    line-height: 1;
  }
  
  body h3 {
    font-size: 1.25em;
    line-height: 1.43;
  }
  
  body h3 .anchor {
    line-height: 1.2;
  }
  
  body h4 {
    font-size: 1em;
  }
  
  body h4 .anchor {
    line-height: 1.2;
  }
  
  body h5 {
    font-size: 1em;
  }
  
  body h5 .anchor {
    line-height: 1.1;
  }
  
  body h6 {
    font-size: 1em;
    color: #777;
  }
  
  body h6 .anchor {
    line-height: 1.1;
  }
  
  body p,
  body blockquote,
  body ul,
  body ol,
  body dl,
  body table,
  body pre {
    margin-top: 0;
    margin-bottom: 16px;
  }
  
  body hr {
    height: 4px;
    padding: 0;
    margin: 16px 0;
    background-color: #e7e7e7;
    border: 0 none;
  }
  
  body ul,
  body ol {
    padding-left: 2em;
  }
  
  body ul ul,
  body ul ol,
  body ol ol,
  body ol ul {
    margin-top: 0;
    margin-bottom: 0;
  }
  
  body li>p {
    margin-top: 16px;
  }
  
  body dl {
    padding: 0;
  }
  
  body dl dt {
    padding: 0;
    margin-top: 16px;
    font-size: 1em;
    font-style: italic;
    font-weight: bold;
  }
  
  body dl dd {
    padding: 0 16px;
    margin-bottom: 16px;
  }
  
  body blockquote {
    padding: 0 15px;
    color: #777;
    border-left: 4px solid #ddd;
  }
  
  body blockquote>:first-child {
    margin-top: 0;
  }
  
  body blockquote>:last-child {
    margin-bottom: 0;
  }
  
  body table {
    display: block;
    width: 100%;
    overflow: auto;
    word-break: normal;
    word-break: keep-all;
  }
  
  body table th {
    font-weight: bold;
  }
  
  body table th,
  body table td {
    padding: 6px 13px;
    border: 1px solid #ddd;
  }
  
  body table tr {
    background-color: #fff;
    border-top: 1px solid #ccc;
  }
  
  body table tr:nth-child(2n) {
    background-color: #f8f8f8;
  }
  
  body img {
    max-width: 100%;
    box-sizing: content-box;
    background-color: #fff;
  }
  
  body code {
    padding: 0;
    padding-top: 0;
    padding-bottom: 0;
    margin: 0;
    font-size: 85%;
    background-color: rgba(0,0,0,0.04);
    border-radius: 3px;
  }
  
  body code:before,
  body code:after {
    letter-spacing: -0.2em;
    content: "\00a0";
  }
  
  body pre>code {
    padding: 0;
    margin: 0;
    font-size: 100%;
    word-break: normal;
    white-space: pre;
    background: transparent;
    border: 0;
  }
  
  body .highlight {
    margin-bottom: 16px;
  }
  
  body .highlight pre,
  body pre {
    padding: 16px;
    overflow: auto;
    font-size: 85%;
    line-height: 1.45;
    background-color: #f7f7f7;
    border-radius: 3px;
  }
  
  body .highlight pre {
    margin-bottom: 0;
    word-break: normal;
  }
  
  body pre {
    word-wrap: normal;
  }
  
  body pre code {
    display: inline;
    max-width: initial;
    padding: 0;
    margin: 0;
    overflow: initial;
    line-height: inherit;
    word-wrap: normal;
    background-color: transparent;
    border: 0;
  }
  
  body pre code:before,
  body pre code:after {
    content: normal;
  }
  
  body kbd {
    display: inline-block;
    padding: 3px 5px;
    font-size: 11px;
    line-height: 10px;
    color: #555;
    vertical-align: middle;
    background-color: #fcfcfc;
    border: solid 1px #ccc;
    border-bottom-color: #bbb;
    border-radius: 3px;
    box-shadow: inset 0 -1px 0 #bbb;
  }
  
  body .pl-c {
    color: #969896;
  }
  
  body .pl-c1,
  body .pl-s .pl-v {
    color: #0086b3;
  }
  
  body .pl-e,
  body .pl-en {
    color: #795da3;
  }
  
  body .pl-s .pl-s1,
  body .pl-smi {
    color: #333;
  }
  
  body .pl-ent {
    color: #63a35c;
  }
  
  body .pl-k {
    color: #a71d5d;
  }
  
  body .pl-pds,
  body .pl-s,
  body .pl-s .pl-pse .pl-s1,
  body .pl-sr,
  body .pl-sr .pl-cce,
  body .pl-sr .pl-sra,
  body .pl-sr .pl-sre {
    color: #183691;
  }
  
  body .pl-v {
    color: #ed6a43;
  }
  
  body .pl-id {
    color: #b52a1d;
  }
  
  body .pl-ii {
    background-color: #b52a1d;
    color: #f8f8f8;
  }
  
  body .pl-sr .pl-cce {
    color: #63a35c;
    font-weight: bold;
  }
  
  body .pl-ml {
    color: #693a17;
  }
  
  body .pl-mh,
  body .pl-mh .pl-en,
  body .pl-ms {
    color: #1d3e81;
    font-weight: bold;
  }
  
  body .pl-mq {
    color: #008080;
  }
  
  body .pl-mi {
    color: #333;
    font-style: italic;
  }
  
  body .pl-mb {
    color: #333;
    font-weight: bold;
  }
  
  body .pl-md {
    background-color: #ffecec;
    color: #bd2c00;
  }
  
  body .pl-mi1 {
    background-color: #eaffea;
    color: #55a532;
  }
  
  body .pl-mdr {
    color: #795da3;
    font-weight: bold;
  }
  
  body .pl-mo {
    color: #1d3e81;
  }
  
  body kbd {
    display: inline-block;
    padding: 3px 5px;
    font: 11px Consolas, "Liberation Mono", Menlo, Courier, monospace;
    line-height: 10px;
    color: #555;
    vertical-align: middle;
    background-color: #fcfcfc;
    border: solid 1px #ccc;
    border-bottom-color: #bbb;
    border-radius: 3px;
    box-shadow: inset 0 -1px 0 #bbb;
  }
  
  body .task-list-item {
    list-style-type: none;
  }
  
  body .task-list-item+.task-list-item {
    margin-top: 3px;
  }
  
  body .task-list-item input {
    margin: 0 0.35em 0.25em -1.6em;
    vertical-align: middle;
  }
  
  body :checked+.radio-label {
    z-index: 1;
    position: relative;
    border-color: #4078c0;
  }
  </style>
</head>
<body>
<h1 id="tcpip-networking">TCP/IP Networking</h1>
<h2 id="link-state-routing">Link State Routing</h2>
<h3 id="routing-in-general">1. Routing in General</h3>
<p>Routing = IP packet forwarding. This is done by routing tables, than can be set mantually (but error-prone) but should be done by a routing protocol which computes the routing tables in a number of routers.</p>
<h4 id="taxonomy">Taxonomy</h4>
<ul>
<li><p><strong>Link State</strong> : all routers in a domain have a map of the entire domain (obtained by flooding). Every link has a cost dependant on its speed. The routes compute the next hop by computing shortest path based on the map. Used in one-domain OSPF, IS-IS and in advanced bridging methods (TRILL, SPB)</p></li>
<li><p><strong>Distance Vector</strong> : all routers in a domain only know their neighbors + distance to all destinations. Routers inform neighbors of their own distance vectors using interior routing (RIP, EIGRP)</p></li>
<li><p><strong>Path Vector</strong> : Every router knows only: its neighbours + paths to all destinations</p>
<p>used for exterior routing (between domains) – see BGP</p></li>
<li><p><strong>Source Routing (Explicit Routes)</strong> : Paths are computed by the source host and put into packet headers. Routers simply lookup the next‐hop, contained in packet header.</p></li>
</ul>
<h3 id="link-state-routing-ospf-single-area">2. Link state routing, OSPF Single Area</h3>
<ul>
<li><p>OSPF = Open Shortest Path First</p></li>
<li><p>Every router has</p>
<ul>
<li>an interface database (describing its physical connections, learnt by configuration)</li>
<li>an adjacency database (describing the neighbour states, learnt by the hello protocol)</li>
<li>a link state database (the network map, learnt by flooding)</li>
</ul></li>
<li><p><strong>Hello</strong> protocol is used to discover neighbouring routers – and to detect</p>
<p>failures.</p></li>
<li><p>When two routers become new neighbours they first synchronize their</p>
<p>link state databases (using <strong>LSA</strong>)</p></li>
</ul>
<h4 id="lsa">LSA</h4>
<p><strong>Link State Advertisement</strong> : describes a router’s attached nets + neighbors.</p>
<ul>
<li>Every router sends one LSA describing its attached networks and neighbouring routers</li>
<li>LSAs are flooded to the entire area and stored by all routers in their link state database. Once the LSAs converge, all the routers have the same map of the network</li>
<li>LSAs contains a sequence number (prevent loops) and age (to flush invalid); only messages with new sequence number are accepted and re-flooded to all neighbours.</li>
<li>Ethernet LANs are treated in a special way : routers elect a designated router per LAN. Every router connected to the LAN receives the “network LSA” from the designated router.</li>
</ul>
<h4 id="ospf-view-of-the-topology-graph">OSPF view of the topology graph</h4>
<p>Oriented graph with edge cost = cost given in LSA (network node to router node = 0)</p>
<p><img src="img/27.png" /></p>
<h4 id="practical-aspects">Practical aspects</h4>
<ul>
<li>OSPF packet are sent directly over IP (OSPF=protocol 89 (0x59)).</li>
<li>Reliable transmission is managed by OSPF with OSPF Acks and timers.</li>
<li>OSPFv2 supports IPv4 only</li>
<li>OSPFv3 supports IPv6 and dual‐stack networks</li>
<li>OSPF routers are identified by a 32 bit number</li>
<li>OSPF areas are identified by a 32 bit number</li>
</ul>
<h3 id="path-computation-using-dijkstras-algorithm">3. Path computation using Dijkstra’s algorithm</h3>
<p>Router computes one or several shortest paths to every destination</p>
<p>from self. Paths computed at every node :</p>
<ul>
<li><p>link state database is same at all routers, but every router performs</p>
<p>a different computation as it computes paths from self</p></li>
<li><p>synchronization of databases guarantees absence of persistent</p>
<p>loops</p></li>
</ul>
<figure>
<img src="img/28.png" alt="28" /><figcaption>28</figcaption>
</figure>
<p>where the nodes are <span class="math inline">\(0\dots N\)</span>; The algorithm computes the shortest paths from node 0. <span class="math inline">\(c(i,j)\)</span> is the cost from <span class="math inline">\(i\)</span> to <span class="math inline">\(j\)</span>. <span class="math inline">\(V\)</span> is the set of nodes visited so far. <span class="math inline">\(pred(i)\)</span> is the estimated set of predecessors of node <span class="math inline">\(i\)</span> along a shortest path. <span class="math inline">\(m(j)\)</span> is the estimated distance from node 0 to <span class="math inline">\(j\)</span>.</p>
<p>The worst‐case complexity of this version is <span class="math inline">\(O(n^2)\)</span> where <span class="math inline">\(n\)</span> is the number of nodes. More efficient versions of the algorithm have a smaller complexity, <span class="math inline">\(O(n\cdot log(n)+E)\)</span> where <span class="math inline">\(E\)</span> is the number of links.</p>
<h4 id="routing-table">Routing table</h4>
<p>In the routing table there is the next hop and distance to every destination.</p>
<figure>
<img src="img/29.png" alt="29" /><figcaption>29</figcaption>
</figure>
<h3 id="equal-cost-multipath">4. Equal Cost Multipath</h3>
<p>OSPF supports multiple shortest paths IP allows to have multiple next‐hops to the same destination in the routing table This is good as it allows to exploit the multiplicity of paths that exist in many networks.</p>
<h3 id="topology-changes">5. Topology Changes</h3>
<p>e.g. when routers or links crash or are rebooted (failures are detected by OSPF’s HELLO protocol or by the BFD protocol). When a router sees a change in the state of a links or a neighbouring router, it sends a new LSA to all its neighbours. All routers update their link state database and propagate the change to the entire OSPF area.</p>
<h3 id="security-of-ospf">6. Security of OSPF</h3>
<p>Attacks against routing protocols</p>
<ul>
<li>send invalid routing information ⇒ disrupt network operation <em>(solution : auth)</em></li>
<li>send forged routing information ⇒ change network paths <em>(solution : auth)</em></li>
<li>denial of service attacks</li>
</ul>
<h3 id="ospf-multiple-areas">7. OSPF, multiple areas</h3>
<p>Link state floods all information to all routers, therefore does not scale to very large networks. OSPF uses a system of areas (i.e. a hierarchy of two routing levels) to scale to very large networks. A multi area OSPF domain has one backbone area (area 0) + several non backbone areas. All inter-area traffic goes through area 0.</p>
<figure>
<img src="img/30.png" alt="30" /><figcaption>30</figcaption>
</figure>
<ol type="1">
<li>Inside one area, link-state is used (one LS DB per area)</li>
<li>Border routers belong to <em>both</em> areas (they have one for each area)</li>
<li>Border area routers inject aggregated distance information learnt from one area into the other area.</li>
</ol>
<p>All routers in area 0, including X3 and X5 compute their distances to networks outside the area (such as n1) using the <em>Bellman‐Ford</em> formula :</p>
<p><span class="math inline">\(d(self, n_1) = \underset{BR\in Area 0}{min}\{d(self, BR)+d(BR, n_1)\}\)</span> where BR is a border router.</p>
<p>The process can be used to compute not only the distance, but also the path. To n1, the min is for BR=X4, therefore the shortest path to n1 is via X4 and the next hop to n1 is the next hop to X4. X3 updates its routing table and adds entries to n1 (and n2).</p>
<h3 id="other-uses-of-link-state">8. Other uses of Link State</h3>
<p>Link state routing (OSPF or IS‐IS) provides a complete view of area to every node. This can be used to provide advanced functions:</p>
<ul>
<li><em>multi-class routing</em>: compute different routes for different types of services (e.g. voice, video)</li>
<li><em>explicit routes</em> (source routing): an edge router computes the entire path, not just the next‐hop, and writes it in the packet header. Avoids transient loops / increases probability of delivery.</li>
</ul>
<p>Example : LS Bridging. Tunneling MAC packets in IP. Use LSR to discover which VLANs are active on their ports and put this information on in the link state database.</p>
<h3 id="software-defined-networking-sdn">9. Software Defined Networking (SDN)</h3>
<p>Some networks want more control; e.g. handle mission critical traffic with high priority; ban non‐HTTP traffic; send suspicious traffic to a machine that does deep packet inspection.</p>
<h4 id="per-flow-forwarding">Per-flow forwarding</h4>
<p>When a packet has to be forwarded, such a router does:</p>
<ul>
<li>Look for a rule match in the list of (priority‐ordered) per‐flow forwarding rules (also called flow table). if one or several matches exist, follow the rule with highest priority</li>
<li>If no rule matches, go to the IP forwarding table and do longest prefix match</li>
</ul>
<p>Same can be used in switches (per flow tables then complement the MAC forwarding table)</p>
<h4 id="sdn">SDN</h4>
<p>Manage the flow tables in a collection of routers/switches from a central application</p>
<h3 id="conclusion">Conclusion</h3>
<p>OSPF (and routing protocols) automatically build connectivity and repair failures.</p>
<p>With link state routing:</p>
<ul>
<li>All routers compute their own link state database, replicated in all routers</li>
<li>All routers compute their routing tables using Dijkstra and the link state database</li>
<li>Convergence after failure is fast (if detection is fast)</li>
<li>Supports flexible cost definitions; can be used for routing specific flows in different ways</li>
<li>Large domains must be split into areas</li>
</ul>
<p>More control can be obtained by an outside application (SDN). SDN is used today primarily with switches, but is starting to be used also for routers.</p>
</body>
</html>
